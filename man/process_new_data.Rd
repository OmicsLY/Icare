% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/model-22-Clinical.R
\name{process_new_data}
\alias{process_new_data}
\title{Process New Data for Model Prediction}
\usage{
process_new_data(
  object,
  new_data,
  miss_threshold = 25,
  save_plots = FALSE,
  save_dir = here::here("ModelData", "clinical_predictions"),
  plot_width = 5,
  plot_height = 5,
  base_size = 14,
  plot_display_num = 1,
  palette_name = "Royal1",
  data_type = "clean",
  save_data = TRUE,
  csv_filename = "new_data.csv"
)
}
\arguments{
\item{object}{A \code{Best_Model} object containing preprocessing information and trained model.
Must have slots: \code{group_col}, \code{process.info}, and \code{filtered.set}.}

\item{new_data}{Data frame containing new observations to process. Must contain
at least the same features as the training data (excluding the group column).}

\item{miss_threshold}{Numeric. Maximum percentage of missing values allowed per sample.
Default is 25. Will be overridden by value stored in \code{object} if available.}

\item{save_plots}{Logical. Should diagnostic plots be saved? Default is FALSE.}

\item{save_dir}{Character. Directory path for saving outputs. Default is "ModelData/clinical_predictions".}

\item{plot_width}{Numeric. Plot width in inches. Default is 5.}

\item{plot_height}{Numeric. Plot height in inches. Default is 5.}

\item{base_size}{Numeric. Base font size for plots. Default is 14.}

\item{plot_display_num}{Numeric. Number of plots to display if not saving. Default is 1.}

\item{palette_name}{Character. Color palette name for plots. Default is "Royal1".}

\item{data_type}{Character. Type of data to return: "clean" (processed only) or
"scale" (with normalization applied). Default is "clean".}

\item{save_data}{Logical. Should processed data be saved to CSV? Default is TRUE.}

\item{csv_filename}{Character. Filename for saved data. Default is "new_data.csv".}
}
\value{
A processed data frame ready for model prediction with:
\itemize{
\item Consistent variable selection as training data
\item Handled missing values (imputed or removed)
\item Processed outliers (according to training method)
\item Factor levels matching training data
\item Optional normalization applied
}
Returns original data with warning if critical preprocessing information is missing.
}
\description{
Prepares new data for prediction by applying the same preprocessing steps used during model training.
Handles missing values, outliers, and normalization consistently with the training procedure.
Includes robust error handling to ensure graceful degradation when components are missing.
}
\details{
The function performs the following processing steps:
\enumerate{
\item Removes group column if present in new data
\item Selects and reorders variables to match training set
\item Removes samples with excessive missing values
\item Imputes missing values using training method
\item Processes outliers based on training parameters
\item Converts factors to match training data levels
\item Optionally applies normalization
}
Each step includes error handling and will skip with warning if required information is missing.
}
\examples{
\dontrun{
processed_data <- process_new_data(object_best, new_data)
}

}
