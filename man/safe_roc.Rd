% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/model-19-cutoff.R
\name{safe_roc}
\alias{safe_roc}
\title{Safe ROC Curve Calculation with Direction Auto-Correction}
\usage{
safe_roc(true_labels, pred_prob, positive_class, negative_class)
}
\arguments{
\item{true_labels}{A vector of true class labels (factor or character)}

\item{pred_prob}{A vector of predicted probabilities for the positive class}

\item{positive_class}{The class to consider as positive (must match levels in true_labels)}

\item{negative_class}{The class to consider as negative (must match levels in true_labels)}
}
\value{
An object of class "roc" from the pROC package, representing the ROC curve
calculated in the optimal direction (either ">" or "<").
}
\description{
Calculates ROC curve while automatically detecting and correcting for cases where
the probability direction needs to be reversed (when AUC < 0.5). This ensures
the ROC curve is always calculated in the optimal direction.
}
\details{
The function:
\itemize{
\item First calculates ROC curve with default direction (">")
\item If AUC < 0.5, recalculates with reversed direction ("<")
\item Returns the ROC curve with higher AUC
\item Issues a message if direction was corrected
}
}
\examples{
\dontrun{
# Example with correct direction
roc1 <- safe_roc(
  true_labels = c("Disease", "Healthy", "Disease"),
  pred_prob = c(0.9, 0.2, 0.8),
  positive_class = "Disease",
  negative_class = "Healthy"
)

# Example needing direction correction
roc2 <- safe_roc(
  true_labels = c("Disease", "Healthy", "Disease"),
  pred_prob = c(0.1, 0.8, 0.2),  # Lower probabilities predict Disease
  positive_class = "Disease",
  negative_class = "Healthy"
)
}
}
